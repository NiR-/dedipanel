<?php L::sCF('steam/steam'); ?>
<p> <?php Page::a('AddServ', 'steam/add'); ?> -
    <?php Page::a('Refresh', 'steam/show'); ?> </p>

<table>
    <tr>
        <th><?php L::eT('IP'); ?></th>
        <th><?php L::eT('Port'); ?></th>
        <th><?php L::eT('Jeu'); ?></th>
        <th><?php L::eT('Dir'); ?></th>
        <th><?php L::eT('Status'); ?></th>
        <th><?php L::eT('Actions'); ?></th>
    </tr>

    <?php foreach ($serveurs AS $serveur) {
        $etat = $serveur->getQuery()->isOnline(); 
        $sid = $serveur->id; ?>
        <tr>
            <td><?php echo $serveur->Vm->ip; ?></td>
            <td><?php echo $serveur->port; ?></td>
            <td><?php echo $serveur->Jeu->nomJeu; ?></td>
            <td><?php echo $serveur->dir; ?></td>
            <td><?php echo ($etat) ? 'AllumÃ©' : 'Eteint'; ?></td>
            <td><?php P::a('Edit', 'steam/edit', $sid); echo '<br />';
                P::a('SoftDel', 'steam/del/soft', $sid); echo ' - ';
                P::a('HardDel', 'steam/del/hard', $sid); echo '<br />';

                if ($etat) {
                    P::a('Shutdown', 'steam/stop', $sid); echo ' - ';
                    P::a('Restart', 'steam/restart', $sid); echo '<br />';
                    P::a('Console', 'steam/console', $sid); echo '<br />';
                } else {
                    P::a('SwitchOn', 'steam/start', $sid); echo '<br />';
                }
                
                P::a('RegenSh', 'steam/regen', $sid); echo ' - ';
                P::a('EditCfg', 'steam/cfg', $sid); echo '<br />';
                
                if (!$serveur->Jeu->source) {
                    P::a('Metamod', 'steam/plugins/mm', $sid); echo ' - ';
                    P::a('AMX', 'steam/plugins/amx', $sid); echo ' - ';
                    P::a('AMXX', 'steam/plugins/amxx', $sid);
                }
                else {
                    P::a('Metamod: Source', 'steam/plugins/mmsrc', $sid); echo ' - ';
                    P::a('SourceMod', 'steam/plugins/srcm', $sid); echo ' - ';
                    P::a('EventScripts', 'steam/plugins/es', $sid);
                }
            ?></td>
        </tr>
    <?php } ?>
</table>